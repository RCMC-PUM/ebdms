{% extends "admin/base_site.html" %}
{% load i18n crispy_forms_tags unfold %}

{% block extrahead %}
  {{ block.super }}
  <script src="{% url 'admin:jsi18n' %}"></script>
  {{ form.media }}
{% endblock %}

{% block content %}
  <div class="space-y-6">

    {# One shared width container for header + form #}
    <div class="max-w-4xl mx-auto space-y-6">

      {# Header card + Back button #}
      <div class="rounded-2xl border border-base-200 dark:border-base-800 bg-white dark:bg-base-900 shadow-sm">
        <div class="flex items-start justify-between gap-4 p-6">

          <div class="flex items-start gap-4">
            <div class="flex h-10 w-10 items-center justify-center rounded-xl bg-primary-100 dark:bg-primary-900">
              <svg class="h-5 w-5 text-primary-600 dark:text-primary-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M9 12h6m-6 4h6m2 4H7a2 2 0 01-2-2V6a2 2 0 012-2h5l5 5v11a2 2 0 01-2 2z"/>
              </svg>
            </div>

            <div>
              <h1 class="text-xl font-semibold text-font-important-light dark:text-font-important-dark">
                {{ title }}
              </h1>

              <p class="mt-1 text-sm text-base-600 dark:text-base-400">
                <span class="font-medium">{% trans "Participant" %}:</span>
                {{ assignment.participant }}
                <span class="mx-2">â€¢</span>
                <span class="font-medium">{% trans "Form" %}:</span>
                {{ assignment.form }}
              </p>
            </div>
          </div>
        </div>
      </div>

      {# Form card (same width now) #}
      <div class="rounded-2xl border border-base-200 dark:border-base-800 bg-white dark:bg-base-900 p-6 shadow-sm">
        <form method="post" class="space-y-6">
          {% csrf_token %}
          {% crispy form "unfold_crispy" %}

          <div class="flex justify-end gap-2 pt-4">
            {% component "unfold/components/button.html" with href=back_url variant="default" %}
              {% trans "Back" %}
            {% endcomponent %}

            {% component "unfold/components/button.html" with type="submit" variant="primary" %}
              {% trans "Save" %}
            {% endcomponent %}
          </div>
        </form>
      </div>

    </div>
  </div>
{% endblock %}
